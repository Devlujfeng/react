<!DOCTYPE html>
<html lang="en">
  <h>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">

    <title>AppointerView</title>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <!--external css-->
    <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="assets/js/gritter/css/jquery.gritter.css" />


    <!-- Custom styles for this template -->
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/style-responsive.css" rel="stylesheet">
    <script src="assets/js/react.js"></script>
    <!-- <script src="assets/js/react-with-addons.js" charset="utf-8"></script> -->
    <script src="assets/js/JSXTransformer.js"></script>

  </head>

  <body>


  <section id="container" >
      <!-- **********************************************************************************************************************************************************
      TOP BAR CONTENT & NOTIFICATIONS
      *********************************************************************************************************************************************************** -->

      <!--header start-->
      <header class="header green-bg">
      <div class="row">
          <!--left Blank Content-->
          <div class="col-lg-2">

          </div>

          <div class="col-lg-8">

              <!--Logo start-->

              <a href="index.html" class="logo"><b>Appointerview</b></a>
              <!--logo end-->

              <div class="nav pull-right ">
                  <div class="nav notify-row" id="top_menu">

                      <ul class="nav top-menu">
                          <!--  notification start -->
                          <li class="dropdown">
                              <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
                                  <i class="fa fa-tasks"></i>
                                  <span class="badge bg-theme">4</span>

                              </a>
                              <ul class="dropdown-menu extended tasks-bar">
                                  <div class="notify-arrow notify-arrow-green"></div>
                                  <li>
                                      <a href="index.html#">
                                          <div class="task-info">
                                              <div class="desc">DashGum Admin Panel</div>
                                              <div class="percent">40%</div>
                                          </div>
                                          <div class="progress progress-striped">
                                              <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                                  <span class="sr-only">40% Complete (success)</span>
                                              </div>
                                          </div>
                                      </a>
                                  </li>
                                  <li>
                                      <a href="index.html#">
                                          <div class="task-info">
                                              <div class="desc">Database Update</div>
                                              <div class="percent">60%</div>
                                          </div>
                                          <div class="progress progress-striped">
                                              <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                                  <span class="sr-only">60% Complete (warning)</span>
                                              </div>
                                          </div>
                                      </a>
                                  </li>
                                  <li>
                                      <a href="index.html#">
                                          <div class="task-info">
                                              <div class="desc">Product Development</div>
                                              <div class="percent">80%</div>
                                          </div>
                                          <div class="progress progress-striped">
                                              <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                                                  <span class="sr-only">80% Complete</span>
                                              </div>
                                          </div>
                                      </a>
                                  </li>
                                  <li>
                                      <a href="index.html#">
                                          <div class="task-info">
                                              <div class="desc">Payments Sent</div>
                                              <div class="percent">70%</div>
                                          </div>
                                          <div class="progress progress-striped">
                                              <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%">
                                                  <span class="sr-only">70% Complete (Important)</span>
                                              </div>
                                          </div>
                                      </a>
                                  </li>
                                  <li class="external">
                                      <a href="#">See All Tasks</a>
                                  </li>
                              </ul>
                          </li>
                          <!--  notification end -->

                          <!-- mailbox start-->
                          <li id="header_inbox_bar" class="dropdown">
                              <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
                                  <i class="fa fa-envelope-o"></i>
                                  <span class="badge bg-theme">5</span>
                              </a>
                              <ul class="dropdown-menu extended inbox">
                                  <div class="notify-arrow notify-arrow-green"></div>
                                  <li>
                                      <a href="index.html#">
                                          <span class="photo"><img alt="avatar" src="assets/img/ui-zac.jpg"></span>
                                    <span class="subject">
                                    <span class="from">Zac Snider</span>
                                    <span class="time">Just now</span>
                                    </span>
                                    <span class="message">
                                        Hi mate, how is everything?
                                    </span>
                                      </a>
                                  </li>
                                  <li>
                                      <a href="index.html#">
                                          <span class="photo"><img alt="avatar" src="assets/img/ui-divya.jpg"></span>
                                    <span class="subject">
                                    <span class="from">Divya Manian</span>
                                    <span class="time">40 mins.</span>
                                    </span>
                                    <span class="message">
                                     Hi, I need your help with this.
                                    </span>
                                      </a>
                                  </li>
                                  <li>
                                      <a href="index.html#">
                                          <span class="photo"><img alt="avatar" src="assets/img/ui-danro.jpg"></span>
                                    <span class="subject">
                                    <span class="from">Dan Rogers</span>
                                    <span class="time">2 hrs.</span>
                                    </span>
                                    <span class="message">
                                        Love your new Dashboard.
                                    </span>
                                      </a>
                                  </li>
                                  <li>
                                      <a href="index.html#">
                                          <span class="photo"><img alt="avatar" src="assets/img/ui-sherman.jpg"></span>
                                    <span class="subject">
                                    <span class="from">Dj Sherman</span>
                                    <span class="time">4 hrs.</span>
                                    </span>
                                    <span class="message">
                                        Please, answer asap.
                                    </span>
                                      </a>
                                  </li>
                                  <li>
                                      <a href="index.html#">See all messages</a>
                                  </li>
                              </ul>
                          </li>
                          <!-- mailbox end-->

                          <!-- user profile start-->
                          <li  class="dropdown">
                              <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
                                  <i class="glyphicon glyphicon-user"></i>
                              </a>
                              <ul class="dropdown-menu extended inbox">
                                  <div class="notify-arrow notify-arrow-green"></div>

                                  <li>
                                      <a href="index.html#">
                                          <i class="glyphicon glyphicon-user"></i>
                                          <span class="from">Profile</span>
                                      </a>
                                  </li>

                                  <li>
                                      <a href="index.html#">
                                          <i class="glyphicon glyphicon-off"></i>
                                          <span class="from" >Log Off</span>
                                      </a>
                                  </li>

                              </ul>

                          </li>
                          <!-- user profile end-->


                      </ul>
                      <!--  notification end -->

                  </div>

              </div>

          </div>

          <!--Right Blank Content-->
          <div class="col-lg-2">

          </div>
      </div>

      </header>

      <!--header end-->

      <!--content header start-->
      <section class="content-header">
      <div class="row">

          <div class="col-lg-2"></div>
          <div class="col-lg-8">
                  <ol class="breadcrumb">
                      <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                      <li class="active"><i class="fa fa-user"></i> profile</li>
                  </ol>

          </div>
          <div class="col-lg-2"></div>
      </div>
      </section>
      <!--Content header end-->

      <!-- **********************************************************************************************************************************************************
      MAIN CONTENT
      *********************************************************************************************************************************************************** -->
      <!--main content start-->

      <section id="main-content">
      <section class="wrapper">
          <div class="row">
              <div class="col-lg-2"></div>
              <div class="col-lg-8">

                  <!--User Basic info start-->
                  <section class="content">


                      <div class="panel panel-default">
                          <div class="panel-heading">Basic Information
                             <i class="fa fa-plus pull-right"> </i>
                          </div>

                          <div class="panel-body">

                              <div class="container ">
                                  <form  class="form-horizontal">
                                      <fieldset >

                                          <!-- Text input User Name-->
                                          <div class="form-group ">
                                              <label class="col-md-2 control-label" for="textinput">User name:</label>
                                              <div class="col-md-3">
                                                  <input  name="textinput" type="text" placeholder="name" class="form-control input-md">

                                              </div>
                                          </div>

                                          <!-- Multiple Radios--Sex (inline) -->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="radios">Sex:</label>
                                              <div class="col-md-3">
                                                  <label class="radio-inline" for="radios-0">
                                                      <input type="radio" name="radios" id="radios-0" value="1" checked="checked">
                                                      Male
                                                  </label>
                                                  <label class="radio-inline" for="radios-1">
                                                      <input type="radio" name="radios" id="radios-1" value="2">
                                                      Female
                                                  </label>
                                              </div>
                                          </div>


                                          <!-- Text input-Phone-->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="textinput">Phone:</label>
                                              <div class="col-md-3">
                                                  <input  name="textinput" type="text" placeholder="Phone" class="form-control input-md">

                                              </div>
                                          </div>

                                          <!-- Text input email-->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="textinput">Email:</label>
                                              <div class="col-md-3">
                                                  <input  name="textinput" type="text" placeholder="Email" class="form-control input-md">

                                              </div>
                                          </div>



                                          <!-- Text input Skype ID-->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="textinput">Skype ID:</label>
                                              <div class="col-md-3">
                                                  <input id="textinput" name="textinput" type="text" placeholder="Skype ID" class="form-control input-md">

                                              </div>
                                          </div>

                                          <!-- Select Country -->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="selectbasic">Country:</label>
                                              <div class="col-md-3">
                                                  <select id="selectbasic" name="selectbasic" class="form-control">
                                                      <option value="1">Iran</option>
                                                      <option value="2">USA</option>
                                                  </select>
                                              </div>
                                          </div>

                                          <!-- Text input-->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="textinput">Interest Company:</label>
                                              <div class="col-md-3">
                                                  <input id="textinput" name="textinput" type="text" placeholder="Company Name" class="form-control input-md">

                                              </div>
                                          </div>
                                          <!-- Textarea -->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="textarea">Interest Work:</label>
                                              <div class="col-md-6">
                                                  <form role="form">
                                                      <label class="checkbox-inline">
                                                          <input type="checkbox" value="">Java Developer
                                                      </label>
                                                      <label class="checkbox-inline">
                                                          <input type="checkbox" value="">UI Designer
                                                      </label>
                                                      <label class="checkbox-inline">
                                                          <input type="checkbox" value="">IOS
                                                      </label>
                                                      <label class="checkbox-inline">
                                                          <input type="checkbox" value="">PHP
                                                      </label>

                                                  </form>
                                                  <form role="form">
                                                      <label class="checkbox-inline">
                                                          <input type="checkbox" value="">Java Developer
                                                      </label>
                                                      <label class="checkbox-inline">
                                                          <input type="checkbox" value="">UI Designer
                                                      </label>
                                                      <label class="checkbox-inline">
                                                          <input type="checkbox" value="">IOS
                                                      </label>
                                                      <label class="checkbox-inline">
                                                          <input type="checkbox" value="">Others
                                                      </label>

                                                  </form>
                                              </div>
                                          </div>


                                          <!-- Textarea -->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="textarea">Self-introduce:</label>
                                              <div class="col-md-5">
                                                  <textarea class="form-control" rows="5" id="textarea" name="textarea">Introduce Yourself</textarea>
                                              </div>
                                          </div>

                                          <!-- Button -->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="singlebutton"></label>
                                              <div class="col-md-4">
                                                  <button name="singlebutton" class="btn btn-primary" >Save</button>
                                                  <button name="singlebutton" class="btn btn-primary" >Cancel</button>

                                              </div>

                                              <div class="col-md-4">

                                              </div>

                                          </div>

                                      </fieldset>
                                  </form>

                              </div>
                          </div>
                      </div>


                  </section>
                  <!--User Basic info end-->

                  <!--Education info start-->


                  <div id="Education"></div>

                  <script  type="text/jsx">

                  var stateRecordMixin = {


                    buttonValidate: function () {
                    if (this.props.myObject == null) {
                      this.passToDb();
                    }
                    else {
                      this.updateEducation();
                    }
                    //this.updateEducation;
                    },
                    passToDb: function () {
                      // get data from page
                      var Authorization ="Token 1e94d4feade081b5862b55bd8378b85e7e1c16d5";
                      var School = this.refs.School.getDOMNode().value;
                      var Subfield_of_study_id = this.refs.Major.getDOMNode().value;
                      var StartYear = this.refs.StartYear.getDOMNode().value + "-" + this.refs.StartMonth.getDOMNode().value;
                      var GraduateYear = this.refs.GraduateYear.getDOMNode().value + "-" + this.refs.GraduateMonth.getDOMNode().value;
                      var Description = this.refs.Description.getDOMNode().value;
                      var Degree_id =  this.refs.Degree.getDOMNode().value;
                      var location_city_id = this.refs.City.getDOMNode().value;
                      var location_region_id = this.refs.Region.getDOMNode().value;
                      var location_country_code =this.refs.Country.getDOMNode().value;
                      //get data from page
                      $.ajax({
                               url: "http://www.codefriend.co:80/users/tictaclu/education/",
                               type:"POST",
                               beforeSend: function (request)
                               {
                                   request.setRequestHeader("Authorization", Authorization);
                               },

                               data: {
                                 "username": "Null",
                                 "school":School,
                                 "degree_id": Degree_id,
                                 "period_start": StartYear,
                                 "period_end": GraduateYear,
                                 "subfield_of_study_id": Subfield_of_study_id,
                                 "description": Description,
                                 "location_city_id":location_city_id,
                                 "location_region_id":location_region_id,
                                 "location_country_code":location_country_code
                               },
                                     success: function() {
                                        console.log("Success");
                                    },
                                    failure: function(data) {
                                        alert('Got an error dude');
                                    }
                       });
                    },


                    deleteEducation: function () {
                      // ajax
                      $.ajax({
                               url: "http://www.codefriend.co:80/education/" + this.props.myObject["id"],
                               type:"DELETE",
                               beforeSend: function (request)
                               {
                                   request.setRequestHeader("Authorization", Authorization);
                               },
                                     success: function() {
                                        console.log("DELETED");
                                    },
                                    failure: function(data) {
                                        alert('Got an error dude');
                                    }
                       });
                        // ajax
                    },

                    updateEducation:function(){
                      //event.preventDefault();
                      // get data from page
                      var Authorization ="Token 1e94d4feade081b5862b55bd8378b85e7e1c16d5";
                      var School = this.refs.School.getDOMNode().value;
                      var Subfield_of_study_id = this.refs.Major.getDOMNode().value;
                      var StartYear = this.refs.StartYear.getDOMNode().value + "-" + this.refs.StartMonth.getDOMNode().value;
                      var GraduateYear = this.refs.GraduateYear.getDOMNode().value + "-" + this.refs.GraduateMonth.getDOMNode().value;
                      var Description = null;
                      var Degree_id =  this.refs.Degree.getDOMNode().value;
                      var location_city_id = this.refs.City.getDOMNode().value;
                      var location_region_id = this.refs.Region.getDOMNode().value;
                      var location_country_code =this.refs.Country.getDOMNode().value;
                      var id = this.props.myObject["id"];
                      //get data from page
                      console.log(location_city_id);
                      console.log("id"+id);
                      // ajax
                      $.ajax({
                               url: "http://www.codefriend.co:80/education/" + id,
                               type:"POST",
                               beforeSend: function (request)
                               {
                                   request.setRequestHeader("Authorization", Authorization);
                               },

                               data: {
                                 "education_id": id,
                                 "school":School,
                                 "subfield_of_study_id": Subfield_of_study_id,
                                 "period_start": StartYear,
                                 "period_end": GraduateYear,
                                 "description": Description,
                                 "degree_id": Degree_id,
                                 "location_city_id":location_city_id,
                                 "location_region_id":location_region_id,
                                 "location_country_code":location_country_code
                               },
                                     success: function() {
                                        console.log("Success");
                                    },
                                    failure: function(data) {
                                        alert('Got an error dude');
                                    }
                       });
                        // ajax
                    },
              		}


                  //REact js
                  var Education = React.createClass({
                     mixins: [stateRecordMixin],
                    getDefaultProps:function(){
                        return{
                          myObject:null,
                          countryList:null,
                          regionList:null,
                          cityList:null
                        }
                    },

                    getInitialState: function() {
                      return {
                        optionsCountry:[],
                        regionList:[],
                        cityList:[],
                        ListDegree:[],
                        ListmetaCate:[],
                        ListSubCate:[],
                        Country:"",
                        Region:"",
                        City:"",
                        school:"",
                        startYear:"",
                        startMonth:"",
                        endYear:"",
                        endMonth:"",
                        metaCate:"",
                        subCate:"",
                        degree:"",
                        id:"",
                        Description:"",
                      };
                    },
                    handleDescription: function () {
                      this.setState({
                        Description: event.target.value
                      });
                    },
                    handleChange: function(event) {
                    this.setState({
                      school: event.target.value
                    });
                    },
                    handleStartYear: function(event){
                      this.setState({
                        startYear:event.target.value
                      });
                    },
                    handleStartMonth: function(event){
                      this.setState({
                        startMonth:event.target.value
                      });
                    },
                    handleEndYear: function(event){
                      this.setState({
                        endYear:event.target.value
                      });
                    },
                    handleEndMonth: function(event){
                      this.setState({
                        endMonth:event.target.value
                      });
                    },

                    handleCountry: function(event){
                      this.setState({
                        Country:event.target.value
                      });
                      this.fetchRegion(this.refs.Country.getDOMNode().value);
                    },

                    handleMetaCate :function(event){
                      this.setState({
                        metaCate:event.target.value
                      });
                      console.log("gogogo"+this.refs.metaCate.getDOMNode().value);
                      this.fetchSubCate(this.refs.metaCate.getDOMNode().value);

                    },
                    handleDegree :function(event){
                      this.setState({
                        degree:event.target.value
                      });
                    },
                    handleSubMajor :function(event){
                      //用户添加edu
                      //console.log(this.state.sub);
                      if (event == null && this.props.myObject == null) {
                        this.setState({
                          subCate:""
                        });
                      }
                      // 第一次读取数据傍定sub meta **需要让马老师添加meta的ID号码，之后要根据ID号的变更来判断是修改还是第一次傍定
                      else if (event == null && this.props.myObject != null) {
                        this.setState({
                          subCate:this.props.myObject["subfield_of_study"]["id"]
                        });
                      }
                       else {
                        this.setState({
                          subCate:event.target.value
                        });
                      }
                    },

                    handleRegion :function(event){
                      if(event == null && this.props.myObject == null){
                        this.setState({
                          Region:""
                        });
                      }
                      else if (event == null && this.props.myObject != null ){
                        this.setState({
                          Region:this.props.myObject["location"]["region"]["code"]
                        });
                      }
                      else{
                      this.setState({
                        Region:event.target.value
                      });
                      this.fetchCity(this.refs.Country.getDOMNode().value.trim(),this.refs.Region.getDOMNode().value.trim());
                      }
                    },
                    handleCity :function(event){
                        if (event == null && this.props.myObject == null){
                        this.setState({
                          City:""
                        });
                      }
                      else if (event == null && this.props.myObject != null){
                        this.setState({
                          City:this.props.myObject["location"]["city"]["id"]
                        });
                      }
                      else{
                      this.setState({
                        City:event.target.value
                      });
                    }
                  },
                    bindDegree: function() {
                      for (var i = 0; i < objListDegree.length; i++){
                        var option = objListDegree[i];
                        this.state.ListDegree.push(
                           <option key={i} value={option.id}>{option.degree}</option>
                        );
                      }
                    },
                    bindMetaCate: function() {
                      for (var i = 0; i < objListmetaCate.length; i++){
                          var option = objListmetaCate[i];
                          this.state.ListmetaCate.push(
                             <option key={i} value={option.id}>{option.field_of_study}</option>
                          );
                        }
                      },
                    fetchSubCate: function (metaid) {
                      console.log(metaid);
                      // ajax
                      $.ajax({
                               url:"http://www.codefriend.co:80/resource/sub_field_of_study/?field_of_study_id=" + metaid,
                               type:"GET",
                               beforeSend: function (request)
                               {
                                   request.setRequestHeader("Authorization", Authorization);
                               },
                                     success: function(data) {
                                       this.setState({
                                         ListSubCate:data["data"]
                                       });
                                       //获取到需要的sub cate list之后直接傍定陶selection tag
                                       this.bindSubCate();
                                       //
                                    }.bind(this)
                       });
                        // ajax
                    },
                    bindSubCate: function () {
                      var length = this.state.ListSubCate.length;
                      for (var i = 0; i < length; i++){
                        var option = this.state.ListSubCate[i];
                        this.state.ListSubCate.push(
                           <option key={i} value={option.id}>{option.subfield_of_study}</option>
                        );
                        //console.log("dd??");
                      }
                      this.handleSubMajor(null);
                      //console.log(this.state.subCate);
                    },

                    bindCountry: function () {
                        for (var i = 0; i < objlistCountry.length; i++){
                          var option = objlistCountry[i];
                          this.state.optionsCountry.push(
                             <option key={i} value={option.code}>{option.name}</option>
                          );
                        }
                    },
                    fetchRegion: function (countryCode) {
                      // ajax
                      $.ajax({
                               url: "  http://www.codefriend.co:80/resource/regions/?country_code=" + countryCode,
                               type:"GET",
                               beforeSend: function (request)
                               {
                                   request.setRequestHeader("Authorization", Authorization);
                               },
                                     success: function(data) {
                                       this.setState({
                                         regionList:data["data"]
                                       });
                                       this.bindRegion();
                                       //
                                    }.bind(this)
                       });
                        // ajax
                    },
                    bindRegion: function() {
                      var length = this.state.regionList.length;
                      for (var i = 0; i < length; i++){
                        var option = this.state.regionList[i];
                        this.state.regionList.push(
                           <option key={i} value={option.code}>{option.name_std}</option>
                        );
                        //console.log("dd??");
                      }
                      this.handleRegion(null);
                    },


                    fetchCity: function (countryCode,regionCode) {
                      // ajax
                      $.ajax({
                               url: "http://www.codefriend.co:80/resource/cities/?country_code="+countryCode+"&region_code=" + regionCode,
                               type:"GET",
                               beforeSend: function (request)
                               {
                                   request.setRequestHeader("Authorization", Authorization);
                               },
                                     success: function(data) {
                                       this.setState({
                                         cityList:data["data"]
                                       });
                                       this.bindCity();
                                       //
                                    }.bind(this)
                       });
                        // ajax
                    },
                    bindCity: function() {
                      var length = this.state.cityList.length;
                      for (var i = 0; i < length; i++){
                        var option = this.state.cityList[i];
                        this.state.cityList.push(
                           <option key={i} value={option.id}>{option.name_std}</option>
                        );
                      }
                      this.handleCity(null);
                    },

                    bindExistSubCate: function (metacateId) {
                      //从API拿出来的数据作傍定到sub cate， 要获得sub cate, 需要拿到meta cate的ID 传入API
                      this.fetchSubCate(metacateId);
                    },
                    bindExistRegion: function (Country,Region,City) {
                      if(Country != null && Region != null && City != null)
                      {
                      this.fetchRegion(Country);
                      this.fetchCity(Country,Region);
                      }
                    },

                    componentWillMount: function() {
                    //console.log("??");
                    this.bindCountry();
                    this.bindDegree();
                    this.bindMetaCate();
                    if(this.props.myObject != null){
                    this.state.Country = (this.props.myObject["location"] != null ? this.props.myObject["location"]["country"]["code"] : "");
                    this.state.Region =  (this.props.myObject["location"] != null ? this.props.myObject["location"]["region"]["code"] : "");
                    this.state.City =  (this.props.myObject["location"] != null ? this.props.myObject["location"]["city"]["id"] : "");
                    this.state.school =  this.props.myObject["school"];
                    this.state.startYear = this.props.myObject["period_start"].substring(0,4);
                    this.state.startMonth = this.props.myObject["period_start"].substring(5,7);
                    this.state.endYear = this.props.myObject["period_end"].substring(0,4);
                    this.state.endMonth = this.props.myObject["period_end"].substring(5,7);
                    this.state.metaCate = this.props.myObject["subfield_of_study"]["id"];
                    this.state.degree = this.props.myObject["degree"]["id"];
                    this.state.id = this.props.myObject["id"];
                    this.state.Description = this.props.myObject["description"];
                    this.bindExistSubCate(this.state.metaCate);
                    this.bindExistRegion(this.state.Country,this.state.Region,this.state.City);
                  }
                    //this.bindExistRegion(this.state.);
                    //console.log(this.state.Country);
                    },


                    componentDidMount: function() {

                    },
                    componentWillUpdate: function() {
                      //console.log("1");
                    },

                    componentDidUpdate: function () {
                      //console.log("2");
                    },



    render:function(){
        //console.log(this.props.myObject["id"]);

        return(
                  <div>
                  <section className="content">
                     <div className="panel panel-default">
                         <div className="panel-heading">Education Information
                             <i className="fa fa-plus pull-right"> </i>
                         </div>
                         <div className="panel-body">
                             <div className="container">
                                 <form id="User-info-form" className="form-horizontal">

                                                    <div className="form-group">
                                                        <label className="col-md-2 control-label" for="textinput">School:</label>
                                                        <div className="col-md-3">
                                                            <input type="text" ref="School" value={this.state.school} placeholder="School" className="form-control input-md" onChange={this.handleChange} />
                                                        </div>
                                                    </div>
                                                    <div className="form-group">
                                                        <label className="col-md-2 control-label" for="textinput">Loation:</label>
                                                        <div className="col-md-2">
                                                        <select ref="Country" name="selectbasi" Defaultvalue="D" value={this.state.Country} className="form-control" onChange={this.handleCountry}>
                                                        <option value="D">Country</option>
                                                        {this.state.optionsCountry}
                                                        </select>
                                                        </div>
                                                        <div className="col-md-2">
                                                        <select ref="Region" name="selectbasic" value="D" className="form-control" value={this.state.Region} onChange={this.handleRegion}>
                                                        <option value="D">Region</option>
                                                        {this.state.regionList}
                                                        </select>
                                                        </div>
                                                        <div className="col-md-2">
                                                        <select ref="City" name="selectbas" value="D" value={this.state.City} className="form-control" onChange={this.handleCity}>
                                                        <option value="D">City</option>
                                                       {this.state.cityList}
                                                        </select>
                                                        </div>
                                                    </div>


                                                    <div className="form-group">
                                                        <label className="col-md-2 control-label" >Degree:</label>
                                                        <div className="col-md-3">
                                                        <select ref="" name="selectbasi" ref="Degree" value="D" value={this.state.degree} className="form-control" onChange={this.handleDegree}>
                                                        <option value="D">Degree</option>
                                                        {this.state.ListDegree}
                                                        </select>
                                                        </div>
                                                    </div>

                                                    <div className="form-group">
                                                        <label className="col-md-2 control-label" >Meta Category:</label>
                                                        <div className="col-md-2">
                                                        <select ref="metaCate" name="selectbasi" className="form-control" value={this.state.metaCate} onChange={this.handleMetaCate}>
                                                        <option value="D">Meta Category</option>
                                                        {this.state.ListmetaCate}
                                                        </select>
                                                        </div>
                                                        <div className="col-md-2">
                                                        <select ref="" name="selectbasi" ref="Major" className="form-control" value={this.state.subCate} onChange={this.handleSubMajor}>
                                                        <option value="D">Sub Category</option>
                                                        {this.state.ListSubCate}
                                                        </select>
                                                        </div>
                                                    </div>
                                                    <div className="form-group">
                                                        <label className="col-md-2 control-label" for="selectbasic">Start Time:</label>
                                                        <div className="col-md-2">
                                                            <select ref="StartYear" value={this.state.startYear} Defaultvalue="D" name="selectbasic" className="form-control"  onChange={this.handleStartYear} >
                                                              <option value="D">Year</option>

                                                                <option>2015</option>
                                                                <option>2014</option>
                                                                <option>2013</option>
                                                                <option>2012</option>
                                                                <option>2011</option>
                                                            </select>
                                                        </div>
                                                        <div className="col-md-2">
                                                            <select ref="StartMonth" value={this.state.startMonth} Defaultvalue="D" name="selectbasic" className="form-control" onChange={this.handleStartMonth} >
                                                              <option value="D">Month</option>
                                                                <option>01</option>
                                                                <option>02</option>
                                                                <option>03</option>
                                                                <option>04</option>
                                                                <option>05</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div className="form-group">
                                                        <label className="col-md-2 control-label" for="selectbasic">Graduate/Expected Graduate Time:</label>
                                                        <div className="col-md-2">
                                                            <select ref="GraduateYear"  value={this.state.endYear} Defaultvalue="D" name="selectbasic" className="form-control"  onChange={this.handleEndYear} >
                                                              <option value="D">Year</option>

                                                                <option>2015</option>
                                                                <option>2014</option>
                                                                <option>2013</option>
                                                                <option>2012</option>
                                                                <option>2011</option>
                                                            </select>
                                                        </div>
                                                        <div className="col-md-2">
                                                            <select ref="GraduateMonth" value={this.state.endMonth} Defaultvalue="D" name="selectbasic" className="form-control" onChange={this.handleEndMonth}>
                                                            <option value="D">Month</option>

                                                                <option>01</option>
                                                                <option>02</option>
                                                                <option>03</option>
                                                                <option>04</option>
                                                                <option>05</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div className="form-group">
                                                        <label className="col-md-2 control-label" >Description:</label>
                                                        <div className="col-md-6">
                                                        <textarea ref="Description" className="form-control input-md" rows="5" onChange={this.handleDescription}>
                                                        {this.state.Description}
                                                        </textarea>
                                                        </div>
                                                    </div>




                                                    <div className="form-group">
                                                        <label className="col-md-2 control-label"></label>
                                                        <div className="col-md-4">
                                                            <div className="col-md-5">
                                                            <a onClick={this.buttonValidate} className="btn btn-primary">SAVE</a>
                                                            </div>
                                                            <div className="col-md-3">
                                                            <a onClick={this.deleteEducation} className="btn btn-primary" >DELETE</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                               </form>
                                           </div>
                                       </div>
                                   </div>
                               </section>
                              </div>
                            ) //return over
                          }, // render Function
                      });
                      //var another = "????dd";
                  var EducationLoop = React.createClass({

                    getInitialState: function() {
                      return {
                        size: 0,
                      }
                    },

                    getDefaultProps: function() {
                      return {
                        length: 0,
                      }
                    },

                    componentWillMount: function() {
                    },

                    render: function() {
                      var rows = [], i = -2, len = this.props.length;
                      while (++i < len) rows.push(i);
                      return (
                            <tbody>
                              {rows.map(function (i) {
                                return <Education key={i} index={i} myObject={dataCollection[i]} />;
                              })}
                            </tbody>
                      );
                    }
                  });
//call to backend
                  var size;
                  var dataCollection = [];
                  var objlistCountry = [];
                  var objListDegree =[];
                  var objListmetaCate=[];
                  //call education data
                  var Authorization ="Token 1e94d4feade081b5862b55bd8378b85e7e1c16d5";
                  $.ajax({
                           url: "http://www.codefriend.co:80/users/tictaclu/education/",
                           type:"GET",
                           beforeSend: function (request)
                           {
                               request.setRequestHeader("Authorization", Authorization);
                           },
                           data: {
                             "username": "tictaclu"
                           },
                             success: function(data) {
                                size = data['data'].length;
                                dataCollection = data['data'];
                                console.log(dataCollection);
                                //getData(); // call method to trigger reactjs
                            },
                            failure: function(data) {
                                alert('Got an error dude');
                            }
                   });
                   //call education data
                   $(function(){



                   })
                   //call dropdownlist for Country
                   $.ajax({
                            url: "http://www.codefriend.co:80/resource/countries/",
                            type:"GET",
                            beforeSend: function (request)
                            {
                                request.setRequestHeader("Authorization", Authorization);
                            },
                                  success: function(data) {
                                    //console.log(data['data']);
                                     objlistCountry = data['data'];
                                     getData();
                                     console.log(objlistCountry);
                                 },
                                 failure: function(data) {
                                     alert('Got an error dude');
                                 }
                    });
                   //call dropdownlist Country
                  //  call Degree list
                   $.ajax({
                            url: "http://www.codefriend.co:80/resource/degrees/",
                            type:"GET",
                            beforeSend: function (request)
                            {
                                request.setRequestHeader("Authorization", Authorization);
                            },
                                  success: function(data) {
                                    //console.log(data['data']);
                                     objListDegree = data['data'];
                                     //console.log(objlistCountry);
                                 },
                                 failure: function(data) {
                                     alert('Got an error dude');
                                 }
                    });
                   //  call Degree list
                   //  call MetaCate
                    $.ajax({
                             url: "http://www.codefriend.co:80/resource/field_of_study/",
                             type:"GET",
                             beforeSend: function (request)
                             {
                                 request.setRequestHeader("Authorization", Authorization);
                             },
                                   success: function(data) {
                                     //console.log(data['data']);
                                      objListmetaCate = data['data'];
                                      //console.log(objlistCountry);
                                  },
                                  failure: function(data) {
                                      alert('Got an error dude');
                                  }
                     });
                    //  call MeteCate


//call to backend

                   function getData(){ //这是一个普通的方法
                     React.render(
                     <EducationLoop length={size} />,
                      document.getElementById("Education"),
                         function(){
                         });
                    }

                 </script>

                  <section class="content">


                      <div class="panel panel-default">
                          <div class="panel-heading">Work Experience
                              <i class="fa fa-plus pull-right"> </i>
                          </div>

                          <div class="panel-body">

                              <div class="container ">
                                  <form id="User-work-form" class="form-horizontal">
                                      <fieldset >


                                          <!-- Text input-School-->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="textinput">Company Name:</label>
                                              <div class="col-md-3">
                                                  <input  name="textinput" type="text" placeholder="School" class="form-control input-md">

                                              </div>
                                          </div>

                                          <!-- Select Basic Start Year -->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="selectbasic">Start Year:</label>

                                              <div class="col-md-1">
                                                  <select id="Start" name="selectbasic"  class="form-control">
                                                      <option value="" selected disabled>year</option>
                                                      <option value="1">2015</option>
                                                      <option value="2">2014</option>
                                                      <option value="3">2013</option>
                                                      <option value="4">2012</option>
                                                      <option value="5">2011</option>
                                                  </select>
                                              </div>
                                              <div class="col-md-1">
                                                  <select id="Start year" name="selectbasic" class="form-control">
                                                      <option value="" selected disabled>month</option>
                                                      <option value="1">1</option>
                                                      <option value="2">2</option>
                                                      <option value="3">3</option>
                                                      <option value="4">4</option>
                                                      <option value="5">5</option>
                                                  </select>
                                              </div>
                                          </div>

                                          <!-- Select Basic Graduate Year -->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="selectbasic">Leave Year:</label>
                                              <div class="col-md-1">
                                                  <select id="leave" name="selectbasic" class="form-control">
                                                      <option value="" selected disabled>year</option>
                                                      <option value="1">2015</option>
                                                      <option value="2">2014</option>
                                                      <option value="3">2013</option>
                                                      <option value="4">2012</option>
                                                      <option value="5">2011</option>
                                                  </select>
                                              </div>
                                              <div class="col-md-1">
                                                  <select id="end" name="selectbasic" class="form-control">
                                                      <option value="" selected disabled>month</option>
                                                      <option value="1">1</option>
                                                      <option value="2">2</option>
                                                      <option value="3">3</option>
                                                      <option value="4">4</option>
                                                      <option value="5">5</option>
                                                  </select>
                                              </div>
                                          </div>


                                          <!-- Select Basic Tittle -->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="selectbasic">Tttle:</label>
                                              <div class="col-md-3">
                                                  <select id="selectbasic" name="selectbasic" class="form-control">
                                                      <option value="1">Staff</option>
                                                      <option value="2">PM</option>
                                                      <option value="2">Operation</option>
                                                      <option value="2">Desinger</option>
                                                  </select>
                                              </div>
                                          </div>

                                          <!-- Textarea -->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="textarea">Main Project Experience:</label>
                                              <div class="col-md-5">
                                                  <textarea class="form-control" rows="5" id="textarea" name="textarea"></textarea>
                                              </div>
                                          </div>

                                          <!-- Button -->
                                          <div class="form-group">
                                              <label class="col-md-2 control-label" for="singlebutton"></label>
                                              <div class="col-md-4">
                                                  <button name="singlebutton" class="btn btn-primary" >Save</button>
                                                  <button name="singlebutton" class="btn btn-primary" >Cancel</button>

                                              </div>


                                          </div>

                                      </fieldset>
                                  </form>

                              </div>
                          </div>
                      </div>


                  </section>

                  <!--Work Experience end-->




              </div>
              <div class="col-lg-2"></div>


          </div>


      </section>

      <!--main content end-->
      <!--footer start-->
      <footer class="site-footer">
          <div class="text-center">
              2015 - AppointerView
              <a href="index.html#" class="go-top">
                  <i class="fa fa-angle-up"></i>
              </a>
          </div>
      </footer>
      <!--footer end-->
  </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/jquery-1.8.3.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

  </body>
</html>
